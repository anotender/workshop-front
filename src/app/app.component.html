<main class="container-fluid" style="margin-top: 10px">
  <div
    [ngClass]="{'col-md-12': cars === null && repairs === null, 'col-md-6': cars !== null && repairs === null, 'col-md-3': cars !== null && repairs !== null}">
    <div class="panel panel-default">
      <div class="panel-heading">Klienci</div>
      <div class="table-responsive">
        <table class="table table-hover table-bordered">
          <thead>
          <tr>
            <th>Nazwa</th>
            <th>Adres</th>
            <th>NIP/PESEL</th>
            <th>Numer telefonu</th>
            <th></th>
          </tr>
          </thead>
          <tbody>
          <tr>
            <td>
              <input type="text" class="form-control" placeholder="Imię i nazwisko lub nazwa firmy"
                     [(ngModel)]="newCustomer.name"/>
            </td>
            <td>
              <input type="text" class="form-control" placeholder="Adres" [(ngModel)]="newCustomer.address"/>
            </td>
            <td>
              <input type="text" class="form-control" placeholder="NIP/PESEL" [(ngModel)]="newCustomer.identifier"/>
            </td>
            <td><input type="text" class="form-control" placeholder="Numer telefonu"
                       [(ngModel)]="newCustomer.telephoneNumber"/></td>
            <td>
              <button class="btn btn-primary" (click)="saveCustomer()">Zapisz</button>
            </td>
          </tr>
          <tr class="link" [ngClass]="{'active': customer === selectedCustomer}" *ngFor="let customer of customers"
              (click)="selectCustomer(customer)">
            <td>{{customer.name}}</td>
            <td>{{customer.address}}</td>
            <td>{{customer.identifier}}</td>
            <td>{{customer.telephoneNumber}}</td>
            <td></td>
          </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>
  <div *ngIf="cars !== null"
       [ngClass]="{'col-md-6': cars !== null && repairs === null, 'col-md-3': cars !== null && repairs !== null}">
    <div class="panel panel-default">
      <div class="panel-heading">{{'Samochody ' + selectedCustomer.name}}</div>
      <div class="table-responsive">
        <table class="table table-hover table-bordered">
          <thead>
          <tr>
            <th>Nazwa</th>
            <th>Silnik</th>
            <th>VIN</th>
            <th>Nr rejestracyjny</th>
            <th></th>
          </tr>
          </thead>
          <tbody>
          <tr>
            <td><input type="text" class="form-control" placeholder="Nazwa" [(ngModel)]="newCar.name"/>
            </td>
            <td><input type="text" class="form-control" placeholder="Silnik" [(ngModel)]="newCar.engine"/></td>
            <td><input type="text" class="form-control" placeholder="VIN" [(ngModel)]="newCar.vin"/></td>
            <td><input type="text" class="form-control" placeholder="Nr rejestracyjny"
                       [(ngModel)]="newCar.registrationNumber"/></td>
            <td>
              <button class="btn btn-primary" (click)="saveCar()">Zapisz</button>
            </td>
          </tr>
          <tr class="link" [ngClass]="{'active': car === selectedCar}" *ngFor="let car of cars"
              (click)="selectCar(car)">
            <td>{{car.name}}</td>
            <td>{{car.engine}}</td>
            <td>{{car.vin}}</td>
            <td>{{car.registrationNumber}}</td>
            <td></td>
          </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>
  <div *ngIf="repairs !== null" class="col-md-6">
    <div class="panel panel-default">
      <div class="panel-heading">{{'Naprawy ' + selectedCar.name}}</div>
      <div class="table-responsive">
        <table class="table table-hover table-bordered">
          <thead>
          <tr>
            <th>Opis</th>
            <th>Robocizna</th>
            <th>Cena&nbsp;części</th>
            <th>Data</th>
            <th>Uwagi</th>
            <th></th>
          </tr>
          </thead>
          <tbody>
          <tr>
            <td>
              <textarea class="form-control" rows="5" placeholder="Opis" [(ngModel)]="newRepair.description"></textarea>
            </td>
            <td>
              <input type="number" class="form-control" placeholder="Robocizna" [(ngModel)]="newRepair.workCost"/>
            </td>
            <td>
              <input type="number" class="form-control" placeholder="Cena części" [(ngModel)]="newRepair.partsCost"/>
            </td>
            <td>
              <input type="date" class="form-control" placeholder="Data" [(ngModel)]="newRepair.date"/>
            </td>
            <td>
              <textarea class="form-control" rows="5" placeholder="Uwagi" [(ngModel)]="newRepair.comments"></textarea>
            </td>
            <td>
              <button class="btn btn-primary" (click)="saveRepair()">Zapisz</button>
            </td>
          </tr>
          <tr *ngFor="let repair of repairs">
            <td>{{repair.description}}</td>
            <td>{{repair.workCost}}</td>
            <td>{{repair.partsCost}}</td>
            <td>{{repair.date}}</td>
            <td>{{repair.comments}}</td>
            <td>
              <button class="btn btn-danger" (click)="deleteRepair(repair)">Usuń</button>
            </td>
          </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>
</main>
